import{j as e,r as d,L as p}from"./index-41711e2b.js";const v=({openModal:t,onClose:n,children:i})=>t&&e.jsx("div",{className:"modal",children:e.jsx("div",{className:"modal-content",children:i})}),g=()=>{const{state:t,dispatch:n}=d.useContext(p);return{setItem:(r,c)=>{n({type:"SET_ITEM",key:r,value:c})},removeItem:r=>{n({type:"REMOVE_ITEM",key:r})},getItem:r=>t[r]}};function N(t){const n=new Date,i=new Date(n);i.setDate(n.getDate()-1);const a=new Date(n);return a.setDate(n.getDate()-(n.getDay()+6)%7),t.toDateString()===n.toDateString()?"Today, "+j(t):t.toDateString()===i.toDateString()?"Yesterday, "+j(t):t>=a?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()]+", "+j(t):D(t)+", "+j(t)}function D(t){const n={year:"numeric",month:"2-digit",day:"2-digit"};return t.toLocaleDateString(void 0,n)}function j(t){const n={hour:"2-digit",minute:"2-digit"};return t.toLocaleTimeString(void 0,n)}const C=({openModal:t,setOpenModal:n})=>{const[i,a]=d.useState(""),{setItem:m}=g(),[r,c]=d.useState(""),{state:h}=d.useContext(p);function x(s){if(s){for(const o in h)if(h[o].title===s)return!0;return!1}}const l=()=>{if(x(i)){u("Task Already Exist"),a("");return}const o=Date.now().toString()+Math.floor(Math.random()).toString(),f={id:o,title:i,createdAt:N(new Date),description:[]};m(o,f),a("")},u=s=>{c(s),setTimeout(()=>{c("")},2e3)};return e.jsx(e.Fragment,{children:e.jsx(v,{openModal:t,onClose:()=>n(!1),children:e.jsxs("div",{className:"modal-wrapper",children:[e.jsx("span",{className:"modal-tile",children:"Create New Task"}),e.jsxs("div",{className:"new-task-modal-content",children:[e.jsx("input",{className:"to-do-input",type:"text",onChange:s=>a(s.target.value),value:i}),e.jsx("button",{className:"btn button1",onClick:l,children:"Create"}),e.jsx("button",{style:{marginLeft:"0.5rem"},className:"btn button2",onClick:()=>n(!1),children:" Done"})]}),e.jsx("div",{className:"modal-error",children:r})]})})})},b={border:"2px solid #07C7A4"},S=({setCurrentTask:t,currentTask:n})=>{const[i,a]=d.useState(!1),[m,r]=d.useState([]),{state:c,clearAll:h}=d.useContext(p),{removeItem:x}=g();d.useEffect(()=>{const s=[],o=Object.keys(c);if(c&&o.length>0){n||t(c[o[0]]);for(const f in c)c[f].title&&s.push({...c[f],id:f})}else t(null);r(s)},[c]);const l=s=>{s&&(s.id===n.id&&t([]),x(s.id))},u=()=>{h()};return e.jsxs("div",{className:"left-container",children:[e.jsx("div",{className:"left-title",children:"TO DO Task"}),e.jsx("div",{className:"left-list-container",children:m&&m.map((s,o)=>e.jsxs("div",{onClick:()=>t(s),style:s.id===n.id?b:{},className:"left-list-items",children:[e.jsxs("div",{children:[e.jsx("div",{className:"todo-date",children:s.createdAt}),e.jsx("div",{children:s.title})]}),e.jsx("button",{className:"btn color-primary",onClick:()=>l(s),children:"x"})]},s.id))}),e.jsxs("div",{className:"left-btns",children:[e.jsx("button",{onClick:()=>a(!0),className:"btn button1 ",children:"Create New Task"}),e.jsx("button",{onClick:u,className:"btn button2 ",children:"Clear All"})]}),e.jsx("div",{children:i&&e.jsx(C,{openModal:i,setOpenModal:a})})]})},E=({openModal:t,setOpenModal:n,currentTask:i})=>{const[a,m]=d.useState(""),{setItem:r,getItem:c}=g(),[h,x]=d.useState("");d.useContext(p);const l=()=>{if(u(a)){s("Description Already Exist");return}const o={id:Date.now().toString()+Math.floor(Math.random()).toString(),title:a,createdAt:N(new Date),checked:!1};i.description.push(o),r(i.id,i),m("")},u=o=>{if(o){const f=i.description.filter(y=>y.title===o);return f&&f.length>0}},s=o=>{x(o),setTimeout(()=>{x("")},2e3)};return e.jsx(e.Fragment,{children:e.jsx(v,{openModal:t,onClose:()=>n(!1),children:e.jsxs("div",{className:"modal-wrapper",children:[e.jsx("div",{className:"modal-tile",children:"Create New Description"}),e.jsx("input",{style:{padding:"1.2rem"},placeholder:"Description..",className:"to-do-input",type:"text",onChange:o=>m(o.target.value),value:a}),e.jsxs("div",{className:"footer-button",children:[e.jsx("button",{className:"btn button2",onClick:l,children:"Save"}),e.jsx("button",{className:"btn button2",onClick:()=>n(!1),children:"Done"})]}),e.jsx("div",{className:"modal-error",children:h})]})})})};Array(7).fill("Some Random Stringg");const I=({currentTask:t,setCurrentTask:n})=>{const[i,a]=d.useState(null),[m,r]=d.useState(!1),{setItem:c}=g();d.useEffect(()=>{t&&t.description?a(t.description):a([])},[t]);const h=l=>{if(l){const u=t&&t.description.length>0&&t.description.filter(s=>s.id!==l.id);t.description=u,a(u),c(t.id,t)}},x=(l,u)=>{if(u){const s=t.description.findIndex(o=>o.id===u.id);t.description[s]&&(t.description[s].checked=l.target.checked),c(t.id,t)}};return e.jsxs("div",{className:"left-container",children:[e.jsx("div",{className:"left-title",children:"Descripton"}),e.jsx("ul",{className:"right-list-container",children:i&&i.map((l,u)=>e.jsxs("div",{className:"right-list-items",children:[e.jsxs("div",{children:[e.jsx("div",{className:"todo-date",children:l.createdAt}),e.jsx("li",{children:l.title})]}),e.jsxs("div",{className:"desc-actions",children:[e.jsx("button",{className:"btn color-primary",onClick:()=>h(l),children:"X"}),e.jsx("input",{checked:l.checked,onChange:s=>x(s,l),type:"checkbox"})]})]},l.id))}),e.jsx("button",{onClick:()=>r(!0),className:"plusbuttoon btn",children:" + "}),m&&e.jsx(E,{openModal:m,setOpenModal:r,currentTask:t})]})},A=()=>{d.useContext(p);const[t,n]=d.useState(null);return e.jsx("div",{className:"main-container",children:e.jsxs("div",{className:"app-container",children:[e.jsx("div",{className:"left-side",children:e.jsx(S,{setCurrentTask:n,currentTask:t})}),e.jsx("div",{className:"right-side",children:e.jsx(I,{currentTask:t,setCurrentTask:n})})]})})};export{A as default};
