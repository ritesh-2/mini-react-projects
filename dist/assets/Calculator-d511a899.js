import{r as a,j as e}from"./index-41711e2b.js";const f=a.createContext(),N=({children:n})=>{const[s,t]=a.useState({sign:"",num:0,res:0}),m={calc:s,setCalc:t};return e.jsx(f.Provider,{value:m,children:n})},S=({value:n})=>{const{setCalc:s,calc:t}=a.useContext(f),m=()=>{s({...t,num:t.num.toString().includes(".")?t.num:t.num+n})},C=()=>{s({sign:"",num:0,res:0})},g=()=>{const r=n.toString();let l;r==="0"&&t.num===0?l="0":l=Number(t.num+r),s({...t,num:l})},c=()=>{s({sign:n,res:!t.res&&t.num?t.num:t.res,num:0})},u=()=>{t.res&&t.num&&s({res:((l,p,b)=>({"+":(o,i)=>o+i,"-":(o,i)=>o-i,x:(o,i)=>o*i,"/":(o,i)=>o/i})[b](l,p))(t.res,t.num,t.sign),sign:"",num:0})},x=()=>{s({num:t.num/100,res:t.res/100,sign:""})},d=()=>{s({num:t.num?t.num*-1:0,res:t.res?t.num*-1:0,sign:""})},h=()=>{console.log(n);const r={".":m,C,"/":c,x:c,"-":c,"+":c,"=":u,"%":x,"+-":d};return r[n]?r[n]():g()},j=r=>({"=":"equals_btn",x:"opt_btn","-":"opt_btn","+":"opt_btn","/":"opt_btn"})[r];return e.jsx(e.Fragment,{children:e.jsxs("button",{onClick:h,className:`${j(n)} calc_button`,children:[" ",n]})})},k=({children:n})=>e.jsx("div",{className:"buttonBox",children:n}),v=({text:n})=>{const s=a.useRef(null),[t,m]=a.useState(48),C=()=>{const c=s.current.offsetWidth,u=g(n,t+"px Roboto");if(u>c){const x=c/u*t*.9;m(x)}};function g(c,u){const d=document.createElement("canvas").getContext("2d");return d.font=u,d.measureText(c).width}return a.useEffect(()=>{C()},[n]),e.jsx("div",{className:"auto-fit-text-area-container",ref:s,children:e.jsx("div",{className:"auto-fit-text-area",style:{fontSize:t+"px"},children:n})})},F=()=>{const{calc:n}=a.useContext(f);return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{opacity:n.sign?"1":"0"},className:"calc-sign",children:n.sign?n.sign:" "}),e.jsx(v,{text:n.num?n.num:n.res})]})};const _=[["C","+-","%","/"],[7,8,9,"x"],[4,5,6,"-"],[1,2,3,"+"],[0,".","="]],y=()=>e.jsx("div",{className:"container",children:e.jsx("div",{className:"wrapper",children:e.jsxs(N,{children:[e.jsx(F,{}),e.jsx(k,{children:_.flat().map((n,s)=>e.jsx(S,{value:n},s))})]})})});export{y as default};
